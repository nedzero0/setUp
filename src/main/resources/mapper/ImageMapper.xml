<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--上面的是映射文件头-->
<mapper namespace="com.setup.mapper.ImageMapper">
   <!--批量添加-->
   <insert id="insertImages" parameterType="java.util.List">
      insert  into image
      (aid,i_name,i_size,i_describe,i_contentType,i_time,i_uploadTime,i_beforePath,i_path,md5)
      values 
      <foreach collection="list" item="image" index="index" separator=",">
         (
         #{image.aid},
         #{image.i_name},
         #{image.i_size},
         #{image.i_describe},
         #{image.i_contentType},
         #{image.i_time},
         #{image.i_uploadTime},
         #{image.i_beforePath},
         #{image.i_path},
         #{image.md5}
         )
      </foreach>
   </insert>

   <!--查看该相册下的所有图片-->
  <select id="queryImageByAid" parameterType="int" resultType="com.setup.entity.Image">
     SELECT *FROM image WHERE  status = 1 and aid = #{aid}
  </select>

<!--   更新图片原信息,即图片名称和描述-->
  <update id="updateImage">
     UPDATE image SET i_name = #{name},i_describe = #{describe}
     WHERE i_id = #{i_id}
  </update>

<!--   回收图片，没有删除，只是放到了回收站（假的，不做这一步），只改变了状态码-->
  <update id="recoveryImage">
       UPDATE image SET `status` = 0 WHERE i_id = #{i_id}
  </update>
<!--   从回收站还原图片,即更改状态码为 1-->
  <update id="updateRecovery">
      UPDATE image SET `status` = 1 WHERE i_id = #{i_id}
  </update>

   <!--   彻底删除图片，即删除状态码为0的-->
   <delete id="delImage">
       DELETE FROM image WHERE status = 0 AND i_id = #{i_id}
  </delete>

</mapper>